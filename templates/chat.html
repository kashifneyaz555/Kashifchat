<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>KashifChat</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #121212; color: white; }
        #chatMessages {
            height: calc(100vh - 200px);
            overflow-y: auto;
            padding: 10px;
            border: 1px solid #444;
            margin-bottom: 10px;
        }
        .message { margin-bottom: 10px; }
        .sent { text-align: right; }
        .received { text-align: left; }
        .system { text-align: center; font-style: italic; color: #aaa; }
        .message-bubble { display: inline-block; padding: 10px; border-radius: 10px; background-color: #333; }
        .message-header { font-weight: bold; }
        .message-time { font-size: 0.8em; color: #888; }
    </style>
</head>
<body>
    <div class="container py-3">
        <h3>KashifChat</h3>
        <div id="chatMessages"></div>
        <div id="typingIndicator" style="display:none;">
            <em><span class="typing-text"></span></em>
        </div>
        <div class="input-group">
            <input type="text" id="messageInput" class="form-control" placeholder="Type a message..." disabled>
            <button class="btn btn-success" id="sendButton" onclick="sendMessage()" disabled>Send</button>
        </div>
    </div>

    <!-- Username Modal -->
    <div class="modal fade" id="usernameModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content bg-dark text-light">
                <div class="modal-header">
                    <h5 class="modal-title">Enter Your Name</h5>
                </div>
                <div class="modal-body">
                    <input type="text" id="usernameInput" class="form-control" placeholder="Your name">
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" onclick="joinChat()">Join</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Sound -->
    <audio id="notificationSound" preload="auto">
        <source src="{{ url_for('static', filename='notification.mp3') }}" type="audio/mpeg">
    </audio>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script src="{{ url_for('static', filename='chat.js') }}"></script>
</body>
</html>